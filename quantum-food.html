<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grok梦工厂 - 量子美食街 🍔🔬</title>
    <style>
        /* 全站霓虹科幻主题，自适应手机/桌面 */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Arial Black', sans-serif;
            background: linear-gradient(45deg, #ff00ff, #00ff88, #0f0f23);
            color: #fff; min-height: 100vh; overflow-x: hidden;
            animation: bgPulse 12s infinite alternate;
        }
        @keyframes bgPulse { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }
        .container { max-width: 900px; margin: 0 auto; padding: 20px; text-align: center; }
        h1 { font-size: 3em; text-shadow: 0 0 30px #ff00ff; margin: 30px 0; animation: glow 2s infinite; }
        @keyframes glow { 0%,100%{text-shadow:0 0 30px #ff00ff;} 50%{text-shadow:0 0 60px #00ff88;} }
        .back { position: absolute; top: 20px; left: 20px; color: #00ff88; font-size: 1.2em; text-decoration: none; z-index: 10; }
        .back:hover { text-shadow: 0 0 20px #ff00ff; }
        input { width: 80%; padding: 20px; font-size: 1.5em; border: 3px solid #00ff88; border-radius: 50px; 
                background: rgba(0,255,136,0.2); color: #fff; text-align: center; margin: 20px 0; }
        input::placeholder { color: #aaa; }
        button { padding: 25px 50px; font-size: 1.6em; background: linear-gradient(45deg, #ff00ff, #00ff88);
                 border: none; border-radius: 50px; color: #000; cursor: pointer; margin: 20px;
                 transition: all 0.4s; box-shadow: 0 15px 50px rgba(255,0,255,0.6); }
        button:hover { transform: scale(1.15) rotate(5deg); box-shadow: 0 30px 80px rgba(0,255,136,0.9); }
        button:active { animation: shake 0.4s; }
        @keyframes shake { 0%,100%{transform:scale(1.15);} 25%{transform:scale(1.1) translateX(-8px);} 75%{transform:scale(1.1) translateX(8px);} }
        #recipe { display: none; background: rgba(0,255,136,0.15); border: 3px solid #00ff88; border-radius: 30px; 
                  padding: 40px; margin: 40px 0; box-shadow: 0 0 60px #00ff88; }
        #recipe h2 { font-size: 2.5em; color: #ff00ff; margin-bottom: 20px; }
        #recipe ul, #recipe ol { text-align: left; font-size: 1.3em; margin: 20px 0; }
        #recipe li { margin: 10px 0; }
        #plateCanvas { max-width: 100%; height: 400px; border: 5px solid #ff00ff; border-radius: 50%; 
                       box-shadow: 0 20px 80px rgba(255,0,255,0.8); margin: 30px 0; cursor: grab; }
        #plateCanvas:active { cursor: grabbing; }
        .particles { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 100; }
        .particle { position: absolute; width: 8px; height: 8px; background: #ff00ff; border-radius: 50%; 
                    animation: explodeFood 1.5s forwards; }
        @keyframes explodeFood { to { opacity: 0; transform: translateY(-100vh) scale(2) rotate(720deg); } }
        footer { margin-top: 60px; font-size: 1.2em; opacity: 0.8; }
        @media (max-width: 600px) { h1 { font-size: 2.2em; } input { width: 95%; } button { width: 90%; } }
    </style>
</head>
<body>
    <a href="index.html" class="back">← 返回梦工厂</a>
    <div class="container">
        <h1>🍔 Grok量子美食街</h1>
        <p style="font-size:1.6em; margin-bottom:40px;">输入食材，AI发明“不可能料理”！AR盘子 + PDF下载</p>
        
        <input type="text" id="ingredients" placeholder="e.g. 鸡蛋+巧克力+辣椒+香蕉" maxlength="100">
        <br>
        <button onclick="generateRecipe()">🔬 生成量子美食！</button>
        
        <div id="recipe">
            <h2 id="dishName"></h2>
            <p id="calories"></p>
            <p id="warning" style="color:#ff6b6b; font-size:1.4em;"></p>
            <h3>材料（4人份）：</h3>
            <ul id="materials"></ul>
            <h3>量子步骤：</h3>
            <ol id="steps"></ol>
            <canvas id="plateCanvas" width="500" height="500"></canvas>
            <br>
            <button onclick="downloadPDF()">📄 下载PDF食谱</button>
            <button onclick="shareRecipe()">📱 分享微信</button>
        </div>
        
        <footer>© 2025 Grok梦工厂 | <a href="https://grokdream.fun" style="color:#00ff88;">grokdream.fun</a></footer>
    </div>
    
    <div class="particles" id="particles"></div>

    <script>
        /* JS核心：AI生成食谱 + 3D盘子 + PDF下载 + 粒子特效 */
        const canvas = document.getElementById('plateCanvas');
        const ctx = canvas.getContext('2d');
        const particlesDiv = document.getElementById('particles');
        
        /* 量子食材库 + 随机融合算法 */
        const ingredientsLib = ['鸡蛋', '巧克力', '辣椒', '香蕉', '鱼', '冰淇淋', '薯片', '咖啡', '牙膏', '电池', '星星', '时间'];
        const adjectives = ['时空', '黑洞', '量子纠缠', '平行宇宙', '纳米', '反物质', '虫洞', '超光速'];
        const nouns = ['卷', '炸弹', '冰火', '漩涡', '幻觉汤', '永生丸', '重生饼', '梦境沙拉'];
        
        let rotation = 0; // 盘子旋转角度
        
        function generateRecipe() {
            const input = document.getElementById('ingredients').value.trim() || '随机惊喜';
            const ingredients = input.split(/[+，,]/).map(i => i.trim()).filter(Boolean);
            
            /* AI生成：随机融合 */
            const dishName = `${randomPick(adjectives)} ${randomPick(nouns)}`;
            const calories = Math.floor(Math.random() * 5000 + 1000);
            const warning = `⚠️ 量子风险：${Math.floor(Math.random() * 100)}% 概率${randomPick(['传送厨房', '变身外星人', '时间倒流', '爱上AI'])}！`;
            
            /* 材料：输入+随机 */
            let materials = ingredients.slice(0, 4);
            while (materials.length < 8) materials.push(randomPick(ingredientsLib));
            materials = materials.map((ing, i) => `${i+1}. ${ing} ${Math.floor(Math.random()*500+50)}g`);
            
            /* 步骤：5步荒谬指南 */
            const steps = [
                '1. 将主材置于黑洞锅中搅拌1小时（或微波3min）。',
                '2. 注入反物质酱汁，静置直到冒烟。',
                '3. 量子纠缠调味：摇晃手机念咒3次。',
                '4. 超光速烘烤：盯着看10秒。',
                '5. 上盘！享用时空旅行。'
            ];
            
            /* 更新DOM */
            document.getElementById('dishName').textContent = dishName;
            document.getElementById('calories').textContent = `卡路里：${calories} kcal（永生级）`;
            document.getElementById('warning').textContent = warning;
            document.getElementById('materials').innerHTML = materials.map(m => `<li>${m}</li>`).join('');
            document.getElementById('steps').innerHTML = steps.map(s => `<li>${s}</li>`).join('');
            document.getElementById('recipe').style.display = 'block';
            
            /* 绘制AR盘子 + 动画 */
            drawPlate();
            animatePlate();
            createParticles(50);
        }
        
        /* Canvas绘制3D盘子（旋转怪菜） */
        function drawPlate() {
            ctx.clearRect(0, 0, 500, 500);
            ctx.save();
            ctx.translate(250, 250);
            ctx.rotate(rotation * Math.PI / 180);
            
            /* 盘子底 */
            const grad = ctx.createRadialGradient(0, 0, 0, 0, 0, 250);
            grad.addColorStop(0, '#fff'); grad.addColorStop(1, '#00ff88');
            ctx.fillStyle = grad; ctx.beginPath(); ctx.arc(0, 0, 220, 0, Math.PI*2); ctx.fill();
            ctx.strokeStyle = '#ff00ff'; ctx.lineWidth = 10; ctx.stroke();
            
            /* 怪菜堆（随机形状+颜色） */
            for (let i = 0; i < 15; i++) {
                ctx.save();
                ctx.translate(Math.random()*300-150, Math.random()*300-150);
                ctx.fillStyle = `hsl(${Math.random()*360}, 100%, 60%)`;
                ctx.beginPath();
                ctx.arc(0, 0, Math.random()*40+20, 0, Math.PI*2);
                ctx.fill();
                ctx.restore();
            }
            
            /* 蒸汽粒子 */
            ctx.fillStyle = 'rgba(255,255,255,0.8)'; 
            for (let i = 0; i < 20; i++) {
                ctx.beginPath(); ctx.arc(Math.sin(i)*50, -100-i*10, 5, 0, Math.PI*2); ctx.fill();
            }
            
            ctx.restore();
        }
        
        /* 盘子拖拽旋转动画 */
        function animatePlate() {
            rotation += 0.5;
            drawPlate();
            requestAnimationFrame(animatePlate);
        }
        
        /* 鼠标拖拽交互 */
        let isDragging = false, lastX = 0;
        canvas.addEventListener('mousedown', e => { isDragging = true; lastX = e.clientX; });
        canvas.addEventListener('mousemove', e => {
            if (isDragging) {
                const delta = e.clientX - lastX;
                rotation += delta * 0.5;
                lastX = e.clientX;
            }
        });
        canvas.addEventListener('mouseup', () => isDragging = false);
        
        /* PDF下载（html2canvas模拟） */
        function downloadPDF() {
            // 简化：生成文本下载（真实用jsPDF库扩展）
            const content = document.getElementById('recipe').innerText;
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a'); a.href = url; a.download = '量子美食.pdf'; a.click();
        }
        
        /* 分享 */
        function shareRecipe() {
            const text = document.getElementById('dishName').textContent + '！' + document.getElementById('warning').textContent;
            navigator.clipboard.writeText(text).then(() => alert('已复制！贴微信炸群😂'));
        }
        
        /* 工具函数 */
        function randomPick(arr) { return arr[Math.floor(Math.random() * arr.length)]; }
        
        /* 粒子爆炸 */
        function createParticles(count) {
            for (let i = 0; i < count; i++) {
                const p = document.createElement('div'); p.className = 'particle';
                p.style.left = '50%'; p.style.top = '50%';
                p.style.animationDelay = Math.random() * 0.3 + 's';
                particlesDiv.appendChild(p);
                setTimeout(() => p.remove(), 1500);
            }
        }
        
        /* 回车生成 */
        document.addEventListener('keypress', e => { if (e.key === 'Enter') generateRecipe(); });
    </script>
</body>
</html>